(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{84236:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=84236,e.exports=t},69153:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(52676),o=r(71140),l=r.n(o),i=r(46366),a=r(96269),s=r(75271),c=r(49505),u=r(50361),d=r(66611),v=r.n(d),m=r(35034),p=r(33347),f=r(63095),h=r(45166),y=r(83457),x=r(45066),g=r(60244),b=r(19857),C=r(47241);let _=(0,s.forwardRef)((e,t)=>{var r,o,l;let{pathname:a,push:s}=(0,i.useRouter)(),{data:c}=(0,m.useSession)(),{country:{isoCode:u}={}}=(0,h.ql)(),{recentlyPickProduct:d,clearRecentlyPick:_}=(0,x.Z)(),k=(0,h.ac)(),w=(0,h.to)(),{countries:T}=(0,h.ql)();if(!d)return null;let{selectedVariant:A,product:E,shortLabelSizeInfo:N,isSearchPanelOpen:S}=d;if(S)return;if(!A||!["/","/collections","/search"].some(e=>"/"===e?a===e:a.startsWith(e)))return null;let I=null==T?void 0:null===(r=T.find(e=>{var t;return e.currency.isoCode===(null===(t=A.price)||void 0===t?void 0:t.currencyCode)}))||void 0===r?void 0:r.currency,j=I&&(0,b.y_)(I.isoCode,I.symbol,null===(o=A.price)||void 0===o?void 0:o.amount),P=()=>{let e=document.cookie.split("; ").reduce((e,t)=>{let[r,n]=t.split("=");return(null==r?void 0:r.startsWith("utm_"))&&(e[r]=decodeURIComponent(n)),e},{});return{utm_source:e.utm_source||"",utm_medium:e.utm_medium||"",utm_campaign:e.utm_campaign||"",utm_content:e.utm_content||"",utm_term:e.utm_term||""}},O=e=>{var t;return{lineItems:[{quantity:1,merchandiseId:e}],buyerIdentity:{customerAccessToken:null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.customerAccessToken,countryCode:u,preferences:{delivery:{deliveryMethod:"SHIPPING"}}},inHomePage:!1}},U=async()=>{try{var e,t;let{id:r}=A||{},n=r?O(r):null;if(!n)throw Error("Failed to prepare cart data");let o=await (0,C.VW)({query:y.P2,variables:n,dataParser:e=>{var t,r,n;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(r=n.cartCreate)||void 0===r?void 0:null===(t=r.cart)||void 0===t?void 0:t.checkoutUrl)||null}});if(!o)throw Error("Failed to create cart or checkout URL is missing");(0,g.Qh)({selectedVariant:A,product:E,user:null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id,userEmail:null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.email});let l=P(),i="".concat(o,"&").concat(new URLSearchParams(l));s(i)}catch(e){if(e instanceof Error)throw Error("Checkout process failed: ".concat(e.message||e))}};return(0,n.jsx)("div",{ref:t,className:"fixed bottom-4 z-20 w-full px-4 md:bottom-auto md:right-4 md:w-auto md:px-0",style:{top:k?"calc(".concat(w+16,"px)"):"auto"},onClick:()=>{var e,t;return(0,g.$n)({user:null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id,userEmail:null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.email})},children:(0,n.jsxs)("div",{className:"relative w-full rounded-lg bg-white/80 py-2 pe-3 ps-2 shadow-[0px_8px_16px_0px_#00000029,0px_0px_1px_0px_#00000029] backdrop-blur-lg hover:bg-gray-secondary md:w-96",children:[(0,n.jsx)(p.p1,{onClick:_,className:"absolute -left-2 -top-2 z-10 size-6 cursor-pointer"}),(0,n.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:()=>U(),children:[(0,n.jsx)("div",{className:"relative size-10 shrink-0",children:(0,n.jsx)(v(),{src:(null==E?void 0:null===(l=E.featuredImage)||void 0===l?void 0:l.url)||f.b7,alt:(null==E?void 0:E.title)||"product image",fill:!0,className:"rounded-lg object-cover"})}),(0,n.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,n.jsx)("h3",{className:"truncate text-sm font-medium text-black",title:null==E?void 0:E.title,children:null==E?void 0:E.title}),(0,n.jsxs)("p",{className:"text-xs text-black",children:[N,j?" / ".concat(j):""]})]}),(0,n.jsx)("button",{onClick:()=>{U()},className:"shrink-0 text-xs font-semibold text-black transition-colors hover:text-brand",children:"CHECKOUT"})]})]})})});_.displayName="RecentlyPickCheckoutCard";var k=r(80447);let w=(0,s.forwardRef)((e,t)=>{var r,o,l;let{pathname:a}=(0,i.useRouter)(),{data:s}=(0,m.useSession)(),{recentlyPickProduct:c,clearRecentlyPick:u}=(0,x.Z)(),d=(0,h.ac)(),y=(0,h.to)(),{countries:C}=(0,h.ql)();if(!c)return null;let{selectedVariant:_,product:w,shortLabelSizeInfo:T,isSearchPanelOpen:A}=c;if(A)return;if(!_||!["/","/collections","/search"].some(e=>"/"===e?a===e:a.startsWith(e)))return null;let E=null==C?void 0:null===(r=C.find(e=>{var t;return e.currency.isoCode===(null===(t=_.price)||void 0===t?void 0:t.currencyCode)}))||void 0===r?void 0:r.currency,N=E&&(0,b.y_)(E.isoCode,E.symbol,null===(o=_.price)||void 0===o?void 0:o.amount);return(0,n.jsx)(k.r,{href:"/products/".concat(null==w?void 0:w.handle).concat("?variant=".concat(null==_?void 0:_.id.split("/").pop())),className:"fixed bottom-4 z-20 w-full px-4 md:bottom-auto md:right-4 md:w-auto md:px-0",style:{top:d?"calc(".concat(y+16,"px)"):"auto"},onClick:()=>{var e,t;return(0,g.$n)({user:null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id,userEmail:null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.email})},children:(0,n.jsx)("div",{className:"relative w-full rounded-lg bg-white/80 py-2 pe-3 ps-2 shadow-[0px_8px_16px_0px_#00000029,0px_0px_1px_0px_#00000029] backdrop-blur-lg hover:bg-gray-secondary md:w-96",ref:t,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"relative size-10 shrink-0",children:(0,n.jsx)(v(),{src:(null==w?void 0:null===(l=w.featuredImage)||void 0===l?void 0:l.url)||f.b7,alt:(null==w?void 0:w.title)||"product image",fill:!0,className:"rounded-lg object-cover"})}),(0,n.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,n.jsx)("h3",{className:"truncate text-sm font-medium text-black",title:null==w?void 0:w.title,children:null==w?void 0:w.title}),(0,n.jsxs)("p",{className:"text-xs text-black",children:[T,N?" / ".concat(N):""]})]}),(0,n.jsx)(p.p1,{onClick:e=>{e.preventDefault(),e.stopPropagation(),u()},className:"size-6 cursor-pointer"})]})})})});w.displayName="RecentlyPickPDPCard";var T=r(71651),A=r(75335),E=e=>{let{children:t}=e,{pathname:r,query:{handle:o,article:d,campaignName:v}}=(0,i.useRouter)(),{t:m}=(0,a.$G)("common");(0,h.Mu)();let p=(0,h.SC)(),f=p&&p>1?({2:_,3:w})[p]:null,{data:y}=(0,c.ZP)((0,A.Cv)("main-menu")),{data:x}=(0,c.ZP)((0,A.Cv)("footer-about-us")),{data:g}=(0,c.ZP)((0,A.Cv)("footer-support")),C=(0,s.useMemo)(()=>[{title:m("footer.menu.about_us"),items:x},{title:m("footer.menu.information"),items:g,cols:2},...T.Wv],[m,x,g]),k=!["/collections","/products","/search"].some(e=>r.startsWith(e))&&"/"!==r;return(0,h.ND)(),(0,n.jsxs)(n.Fragment,{children:[k&&(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:(0,b.BL)(r,d||o||v)})}),(0,n.jsx)(u.h4,{menus:y}),f?(0,n.jsx)(f,{}):null,(0,n.jsx)("main",{className:"flex w-full flex-col items-center gap-4 bg-white",children:t}),(0,n.jsx)(u.$_,{menus:C})]})}},76365:function(e,t,r){"use strict";r.d(t,{Cs:function(){return c},S3:function(){return d},c0:function(){return f},cx:function(){return p},eZ:function(){return u},iC:function(){return m},iX:function(){return v}});var n=r(3807),o=r(63095),l=r(47241),i=r(84921),a=r(49087),s=r(71661);let c=async(e,t)=>(0,l.VW)({query:i.Hu,variables:{input:{email:e,password:t}},dataParser:e=>{let{data:{customerAccessTokenCreate:{customerAccessToken:{accessToken:t}}}}=e;return t},apiType:o.An.SHOPIFY}),u=async(e,t)=>new n.Multipass(s.env.SHOPIFY_MULTIPASS_SECRET).withCustomerData({email:e,identifier:t}).token(),d=async e=>(0,l.VW)({query:i.bd,variables:{multipassToken:e},dataParser:e=>{var t;let{data:{customerAccessTokenCreateWithMultipass:{customerAccessToken:{accessToken:r},customerUserErrors:n}}}=e;if(null==n?void 0:n.length)throw Error(null===(t=n[0])||void 0===t?void 0:t.message);return r}}),v=async e=>(0,l.VW)({query:a.f,variables:{customerAccessToken:e},dataParser:e=>{let{data:{customer:{id:t}}}=e;return t.split("/").slice(-1)[0]}}),m=async(e,t,r,n)=>(0,l.VW)({query:i.F9,variables:{input:{firstName:e,lastName:t,email:r,password:n}},dataParser:e=>{var t,r,n;let{data:o}=e;if(!o)throw Error("Unable to create customer");if(null===(r=o.customerCreate)||void 0===r?void 0:null===(t=r.customerUserErrors)||void 0===t?void 0:t.length)throw Error(null===(n=o.customerCreate.customerUserErrors[0])||void 0===n?void 0:n.message)}}),p=async e=>(0,l.VW)({query:i.zi,variables:{email:e},dataParser:e=>{var t;let{data:{customerRecover:{customerUserErrors:r}}}=e;if(null==r?void 0:r.length)throw Error(null===(t=r[0])||void 0===t?void 0:t.message)}}),f=async(e,t,r)=>(0,l.VW)({query:i.FQ,variables:{id:"gid://shopify/Customer/".concat(e),input:{password:t,resetToken:r}},dataParser:e=>{var t;let{data:{customerReset:{customerUserErrors:r}}}=e;if(null==r?void 0:r.length)throw Error(null===(t=r[0])||void 0===t?void 0:t.message)}})},83457:function(e,t,r){"use strict";r.d(t,{P2:function(){return l}});var n=r(23448);let o="\n  fragment cart on Cart {\n    id\n    checkoutUrl\n    cost {\n      subtotalAmount {\n        amount\n        currencyCode\n      }\n      totalAmount {\n        amount\n        currencyCode\n      }\n      totalTaxAmount {\n        amount\n        currencyCode\n      }\n    }\n    lines(first: 100) {\n      edges {\n        node {\n          id\n          quantity\n          cost {\n            totalAmount {\n              amount\n              currencyCode\n            }\n          }\n          merchandise {\n            ... on ProductVariant {\n              id\n              title\n              selectedOptions {\n                name\n                value\n              }\n              product {\n                ...product\n              }\n            }\n          }\n        }\n      }\n    }\n    totalQuantity\n  }\n  ".concat(n.Z,"\n"),l="\n  mutation cartCreate(\n    $lineItems: [CartLineInput!]!\n    $buyerIdentity: CartBuyerIdentityInput\n    $discountCodes: [String!]\n    $attributes: [AttributeInput!]\n    $inHomePage: Boolean = false  \n  ) {\n    cartCreate(\n      input: {\n        lines: $lineItems\n        buyerIdentity: $buyerIdentity\n        discountCodes: $discountCodes\n        attributes: $attributes\n      }\n    ) {\n      cart {\n        ...cart\n      }\n    }\n  }\n  ".concat(o,"\n")},81915:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(52676),o=r(53738),l=r.n(o),i=r(18057),a=r(27576),s=r.n(a),c=r(75271),u=r(49505),d=r(79594),v=r(63095),m=r(75335),p=r(82343),f=r(48265),h=r.n(f),y=r(2066),x=r(94723),g=r(57185),b=r(76365),C=r(97398),_=r(63233).Buffer,k=r(71661);let w=async e=>{let t=await (0,b.eZ)(e,null),r=null;try{r=await (0,b.S3)(t)}catch(e){}if(r)return r;let n=_.from(e).toString("base64");t=await (0,b.eZ)(e,n);try{r=await (0,b.S3)(t)}catch(e){var o;throw Error(null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"Failed to create Shopify token")}return r},T=async e=>{try{let t=await (0,C.Z)({query:"".concat("https://api.loyalty.storefront.kickscrew.com","/my/referral_code"),method:"POST",headers:{logged_in_customer_id:e}});return null==t?void 0:t.code}catch(e){return null}},A={providers:[(0,y.Z)({name:"Shopify",credentials:{email:{label:"Email",type:"text",placeholder:"your@email.com"},password:{label:"Password",type:"password"}},async authorize(e){if(!e)return null;let{email:t,password:r}=e,n=null;try{n=await (0,b.Cs)(t,r)}catch(e){return null}return n?{id:await (0,b.iX)(n),name:t,email:t,customerAccessToken:n}:null}}),(0,g.Z)({clientId:k.env.NEXTAUTH_GOOGLE_CLIENT_ID,clientSecret:k.env.NEXTAUTH_GOOGLE_CLIENT_SECRET,authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code"}}}),(0,x.Z)({idToken:!0,clientId:k.env.NEXTAUTH_FACEBOOK_CLIENT_ID,clientSecret:k.env.NEXTAUTH_FACEBOOK_CLIENT_SECRET,authorization:{url:"https://www.facebook.com/v11.0/dialog/oauth",params:{client_id:k.env.NEXTAUTH_FACEBOOK_CLIENT_ID,scope:"openid email",response_type:"code"}},token:{url:"https://graph.facebook.com/oauth/access_token",async request(e){let t="https://graph.facebook.com/oauth/access_token"+"?code=".concat(e.params.code)+"&client_id=".concat(e.provider.clientId)+"&redirect_uri=".concat(e.provider.callbackUrl)+"&client_secret=".concat(e.provider.clientSecret),r=await fetch(t);return{tokens:await r.json()}}}})],callbacks:{signIn:async e=>{let{account:t,profile:r}=e;if(((null==t?void 0:t.provider)==="google"||(null==t?void 0:t.provider)==="facebook")&&(null==r?void 0:r.email)){let e=r.email;t.providerAccountId=e;try{let r=await w(e);r&&(t.customerAccessToken=r)}catch(e){return"/?error="+encodeURIComponent("".concat(e.message))}}return!0},jwt:async e=>{let{token:t,user:r,account:n}=e;if(r){if(t.user=r,(null==n?void 0:n.provider)==="google"||(null==n?void 0:n.provider)==="facebook"){let e=n.customerAccessToken;e&&(r.customerAccessToken=e,r.id=await (0,b.iX)(e))}let e=await T(r.id);e&&(r.referralCode=e)}return t},session:async e=>{let{session:t,token:r}=e;return r&&r.user&&(t.user=r.user),t}},pages:{signIn:"/account/login",signOut:"/",error:"/"}};h()(A);let E=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,f.getServerSession)(...t,A)};var N=r(19857),S=r(47241),I=r(71661),j=e=>{let{Page:t,Layout:r=c.Fragment,localeNSs:o,fallbackKeys:a,getServerSideProps:f}=e;return a=[...null!=a?a:[],m.op,(0,m.Cv)("main-menu"),(0,m.Cv)("footer-about-us"),(0,m.Cv)("footer-support")],{Page:e=>{let{fallback:o,session:l,...i}=e;return(0,n.jsx)(u.J$,{value:{fallback:o,session:l},children:(0,n.jsx)(r,{children:(0,n.jsx)(t,{...i})})})},getServerSideProps:async e=>new Promise(t=>E(e.req,e.res).then(r=>{var n;let c,u,m;let{req:h,locale:y}=e,x=()=>{c&&m&&u&&t({...c,props:{session:r,...u,...c.props,...m}})};if(f?f(e).then(e=>{c=e,x()}):c={props:{fallback:{}}},o?(0,i.serverSideTranslations)(null!=y?y:d.ZW,o).then(e=>{u=e,x()}):u={},h&&!(null===(n=h.url)||void 0===n?void 0:n.startsWith("/_next"))&&(null==a?void 0:a.length)){let t=Array(a.length);for(let e=0;e<a.length;e++){let t=a[e];if(!Array.isArray(t))continue;Array.isArray(t[0])||(t[0]=[t[0]]);let[r]=t,n=r.indexOf(-1);-1!==n&&(r[n]=e-1),r.forEach(t=>{let r=a[t];r.depTargetSet?r.depTargetSet.add(e):r.depTargetSet=new Set([e])}),t.pendingDepCount=r.length}let n=(o,i)=>new Promise((c,u)=>{let d,f;if("object"==typeof o&&"apiType"in o&&o.apiType===v.An.LOCAL)d=async e=>{let{query:t,dataParser:r}=e,n=JSON.parse(await l().readFile(s().join(I.cwd(),"public/",t)));return r?r(n):n},f=o;else{let e=e=>{var t,n,o,l,i,a;if("string"==typeof e)return[C.Z,e];if("apiType"in e&&(e.apiType===v.An.SHOPIFY||e.apiType===v.An.SHOPIFY_ADMIN)){if(e.withAccessToken&&r&&(null!==(n=e.variables)&&void 0!==n||(e.variables={}),e.variables.customerAccessToken=null===(t=r.user)||void 0===t?void 0:t.customerAccessToken),e.isContextual){let[,t=p.Cv.US]=null!==(o=null==y?void 0:y.split("-"))&&void 0!==o?o:[];null!==(l=e.variables)&&void 0!==l||(e.variables={}),e.variables.country=t}return[S.VW,e]}return e.withAccessToken&&r&&(null!==(a=e.headers)&&void 0!==a||(e.headers={}),e.headers["X-Shopify-Customer-Access-Token"]=null===(i=r.user)||void 0===i?void 0:i.customerAccessToken),[C.Z,e]};if(Array.isArray(o))d=async t=>Promise.all(t.map(t=>{let[r,n]=e(t);return r(n)})),f=o;else{let[t,r]=e(o);d=t,f=r}}d(f).then(e=>{t[i]=["string"==typeof o?o:(0,N.d5)(o),"object"!=typeof e||Array.isArray(e)||null===e?e:(0,N.cb)(e)],t.filter(Boolean).length===a.length&&(m={fallback:Object.fromEntries(t)},x())}).catch(e=>{t[i]=["string"==typeof o?o:(0,N.d5)(o),e],u(e)}).finally(()=>{var r;let o=a[i];(null===(r=o.depTargetSet)||void 0===r?void 0:r.size)&&[...o.depTargetSet].forEach(r=>{let o=a[r];if(1===o.pendingDepCount){let[l,i]=o;n(i(...l.map(e=>{var r,n;return null!==(n=null===(r=t[e])||void 0===r?void 0:r[1])&&void 0!==n?n:{}}),e),r)}o.pendingDepCount--})})});for(let t=0;t<a.length;t++){let r=a[t];Array.isArray(r)||n("function"==typeof r?r(e):r,t)}}else m={fallback:{}},x()}))}}},40827:function(){},74940:function(){},53738:function(){}}]);