(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{22637:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(47215)}])},47215:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return S},default:function(){return w}});var n=t(52676),o=t(46366),i=t(35034),s=t(96269),l=t(75271),c=t(60027),u=t(65204),a=t(20364),d=t(41360),v=e=>{let{query:r,hasResult:t}=e,o='Search results for "'.concat(r,'"'),i="".concat("https://www.kickscrew.com","/search?q=").concat(r),s=null==r?void 0:r.split(" ").join(",");return(0,n.jsx)(d.U,{title:t?"Search Results":"No Search Results",description:o,image:"https://www.kickscrew.com/cdn/shop/files/kc-logo_500x.svg",url:i,keywords:s})},f=t(80447),h=t(68953),m=t(69153),p=t(81915),y=t(60244);let{Page:g}=(0,p.Z)({Page:e=>{var r,t,c,u;let{serverState:d,serverUrl:m}=e,{push:p,asPath:g,query:{q:S,page:w}}=(0,o.useRouter)(),{data:b,status:_}=(0,i.useSession)(),{t:j}=(0,s.$G)("common"),x=(0,l.useRef)(void 0),[O,P]=(0,l.useState)(!1),R=(0,l.useMemo)(()=>{var e,r,t,n;return null!==(n=null==d?void 0:null===(t=d.initialResults[h.sc.products])||void 0===t?void 0:null===(r=t.results)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.hits)&&void 0!==n?n:[]},[d]),k=!!(null==R?void 0:R.length),E=null==d?void 0:null===(t=d.initialResults[h.sc.products])||void 0===t?void 0:null===(r=t.state)||void 0===r?void 0:r.query;(0,l.useEffect)(()=>{var e,r;if(!k||x.current===S||"loading"===_)return;let t=null!==(r=R.slice(0,5).map(e=>e.storefront_id))&&void 0!==r?r:[];(0,y.hM)({user:null==b?void 0:b.user.id,userEmail:null==b?void 0:null===(e=b.user)||void 0===e?void 0:e.email,searchResult:t}),x.current=S},[k,S,_,R,b]);let N=null==R?void 0:R[0],C=E&&k&&1===R.length&&N.handle&&((null==E?void 0:E.trim().toLowerCase())===(null==N?void 0:null===(c=N.model_no)||void 0===c?void 0:c.toLowerCase())||(null==E?void 0:E.trim().toLowerCase())===(null==N?void 0:null===(u=N.modelno)||void 0===u?void 0:u.toLowerCase()));return((0,l.useEffect)(()=>{C&&p("/products/".concat(N.handle))},[C,N.handle,p]),C)?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{query:E,hasResult:k}),(0,n.jsx)("div",{className:"w-full bg-gray-secondary px-4 py-6",children:(0,n.jsxs)("div",{className:"main-content-area flex flex-col gap-2",children:[(0,n.jsx)("h1",{className:"w-full text-start text-[2rem] font-bold leading-10",children:d&&(0,n.jsx)(s.cC,{t:j,i18nKey:k?"collection.search.title":"collection.search.no_result.title",components:{Query:(0,n.jsx)("span",{className:"text-primary",children:E})}})}),!k&&(0,n.jsx)("span",{className:"text-sm font-normal",children:(0,n.jsx)(s.cC,{t:j,i18nKey:"collection.search.no_result.subtitle",components:{Link:(0,n.jsx)(f.r,{className:"underline",href:"/collections/latest-drops"})}})})]})}),k&&(0,n.jsx)(a.UG,{searchDrawerOpen:O,setSearchDrawerOpen:P,serverState:d,serverUrl:m,asPath:g,title:"search",...w&&{page:+w-1}})]})},Layout:m.Z,localeNSs:["common"],getServerSideProps:async e=>{var r,t;let{req:o,query:{page:i,sortBy:s},resolvedUrl:l}=e,d=(null===(r=o.headers.referer)||void 0===r?void 0:r.split("://")[0])||"https",v="".concat(d,"://").concat(o.headers.host).concat(o.url),f=await (0,u.v)((0,n.jsx)(a.UG,{serverUrl:v,asPath:o.url,...i&&{page:+i-1}}),{renderToString:c.Dq});return{...!(null===(t=o.url)||void 0===t?void 0:t.startsWith("/_next"))&&s&&{redirect:{destination:l.replace("sortBy=".concat(s,"&"),"").replace("sortBy=".concat(s),""),permanent:!1}},props:{serverState:f,serverUrl:v}}}});var S=!0,w=g},65204:function(e,r,t){"use strict";t.d(r,{v:function(){return v}});var n=t(79324);function o(e,r){r(e),e.getWidgets().forEach(function(e){(0,n.J)(e)&&o(e,r)})}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach(function(r){var n,o;n=r,o=t[r],(n=function(e){var r=function(e,r){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==i(r)?r:String(r)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var c=t(57242),u=t(75271),a=t(40981),d=t(34359);function v(e,r){var t=r.renderToString,n={current:void 0};(0,c.V)();var i=function(){var e=!1;return function(r){var t=r.search;if(e)throw Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");e=!0,n.current=t}};return f({children:e,renderToString:t,searchRef:n,notifyServer:i()}).then(function(r){var s=!1;return(o(n.current.mainIndex,function(e){s=s||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),s)?((0,c.V)(),f({children:u.createElement(d.H,r,e),renderToString:t,searchRef:n,notifyServer:i(),skipRecommend:!0})):r})}function f(e){var r=e.children,t=e.renderToString,n=e.notifyServer,i=e.searchRef,s=e.skipRecommend;return Promise.resolve().then(function(){t(u.createElement(a.m.Provider,{value:{notifyServer:n}},r))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(!i.current)throw Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?");return function(e){var r,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.mainHelper,o=n.getClient();return e.compositionID?n.setClient(l(l({},o),{},{search:function(e){return r=[e.requestBody.params],o.search(e)}})):n.setClient(l(l({},o),{},{search:function(e){return r=e.map(function(e){return e.params}),o.search(e)}})),e._hasSearchWidget&&(e.compositionID?n.searchWithComposition():n.searchOnlyWithDerivedHelpers()),!t&&e._hasRecommendWidget&&n.recommend(),new Promise(function(o,i){var s=!e._hasSearchWidget,l=!e._hasRecommendWidget||t;n.derivedHelpers[0].on("result",function(){s=!0,l&&o(r)}),n.derivedHelpers[0].on("recommend:result",function(){l=!0,s&&o(r)}),n.on("error",function(e){i(e)}),e.on("error",function(e){i(e)}),n.derivedHelpers.forEach(function(e){return e.on("error",function(e){i(e)})})})}(i.current,s)}).then(function(e){return{initialResults:function(e,r){var t={},n=0;if(o(e,function(e){var o=e.getResults(),i=null===(s=e.getHelper())||void 0===s?void 0:s.lastRecommendResults;if(o||i){var s,c,u,a,d=(null==o?void 0:null===(c=o._rawResults)||void 0===c?void 0:c.length)||0,v=d?null==r?void 0:r.slice(n,n+d):[];n+=d,t[e.getIndexId()]=l(l(l({},o&&{state:l(l({},o._state),{},{clickAnalytics:null==v?void 0:null===(u=v[0])||void 0===u?void 0:u.clickAnalytics,userToken:null==v?void 0:null===(a=v[0])||void 0===a?void 0:a.userToken}),results:o._rawResults}),i&&{recommendResults:{params:JSON.parse(JSON.stringify(i._state.params)),results:i._rawResults}}),v&&{requestParams:v})}}),0===Object.keys(t).length)throw Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return t}(i.current.mainIndex,e)}})}}},function(e){e.O(0,[774,342,688,394,974,176,888,179],function(){return e(e.s=22637)}),_N_E=e.O()}]);